<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Nexus Apex - Advanced modular application with enhanced security and accessibility">
    <meta name="theme-color" content="#1a1a2e">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'nonce-{NONCE}'; style-src 'self' 'nonce-{NONCE}'; img-src 'self' data: https:; font-src 'self'; connect-src 'self'">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    
    <title>Nexus Apex - Modular Application</title>
    
    <style nonce="{NONCE}">
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
            transition: background-color 0.3s ease;
        }

        /* Dark Mode Support */
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #1a1a2e;
                color: #e0e0e0;
            }
        }

        /* Accessibility: Focus States */
        *:focus-visible {
            outline: 2px solid #0066cc;
            outline-offset: 2px;
        }

        a, button {
            text-decoration: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        a:hover {
            text-decoration: underline;
        }

        button {
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            font-size: 1rem;
            font-weight: 500;
        }

        .btn-primary {
            background-color: #0066cc;
            color: white;
        }

        .btn-primary:hover {
            background-color: #0052a3;
        }

        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
        }

        /* Layout Components */
        header {
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        @media (prefers-color-scheme: dark) {
            header {
                background-color: #2a2a3e;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            }
        }

        nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        nav ul {
            list-style: none;
            display: flex;
            gap: 2rem;
        }

        nav a {
            color: #333;
            font-weight: 500;
        }

        @media (prefers-color-scheme: dark) {
            nav a {
                color: #e0e0e0;
            }
        }

        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        section {
            margin-bottom: 3rem;
            padding: 2rem;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        @media (prefers-color-scheme: dark) {
            section {
                background-color: #2a2a3e;
                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            }
        }

        h1, h2, h3 {
            margin-bottom: 1rem;
            color: #1a1a2e;
        }

        @media (prefers-color-scheme: dark) {
            h1, h2, h3 {
                color: #e0e0e0;
            }
        }

        h1 {
            font-size: 2.5rem;
            line-height: 1.2;
        }

        h2 {
            font-size: 2rem;
            margin-top: 1.5rem;
        }

        h3 {
            font-size: 1.5rem;
        }

        p {
            margin-bottom: 1rem;
        }

        /* Form Elements */
        form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            max-width: 500px;
        }

        label {
            font-weight: 500;
            margin-bottom: 0.5rem;
            display: block;
        }

        input, textarea, select {
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            font-family: inherit;
        }

        @media (prefers-color-scheme: dark) {
            input, textarea, select {
                background-color: #3a3a4e;
                color: #e0e0e0;
                border-color: #444;
            }
        }

        input:focus, textarea:focus, select:focus {
            border-color: #0066cc;
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
        }

        /* Grid Layout */
        .grid {
            display: grid;
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }

        /* Utility Classes */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .hidden {
            display: none;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        .text-center {
            text-align: center;
        }

        .text-muted {
            color: #6c757d;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.75rem;
            }

            h2 {
                font-size: 1.5rem;
            }

            nav ul {
                gap: 1rem;
            }

            section {
                padding: 1.5rem;
            }

            main {
                padding: 1rem 0.5rem;
            }
        }

        /* Animation */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }

        /* Footer */
        footer {
            background-color: #1a1a2e;
            color: #e0e0e0;
            text-align: center;
            padding: 2rem 1rem;
            margin-top: 3rem;
        }

        footer a {
            color: #0066cc;
        }

        footer a:hover {
            color: #0052a3;
        }
    </style>
</head>
<body>
    <!-- Header Navigation -->
    <header role="banner">
        <nav role="navigation" aria-label="Main navigation">
            <div class="container">
                <h1 style="margin: 0; font-size: 1.5rem;">Nexus Apex</h1>
            </div>
            <ul>
                <li><a href="#home" aria-current="page">Home</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main role="main">
        <!-- Hero Section -->
        <section id="home" class="fade-in" aria-labelledby="hero-title">
            <h1 id="hero-title">Welcome to Nexus Apex</h1>
            <p>A modern, modular application built with security, accessibility, and performance in mind.</p>
            <button class="btn-primary" aria-label="Get started with Nexus Apex">Get Started</button>
        </section>

        <!-- Features Section -->
        <section id="features" class="fade-in" aria-labelledby="features-title">
            <h2 id="features-title">Key Features</h2>
            <div class="grid grid-3">
                <article>
                    <h3>Modular Architecture</h3>
                    <p>Clean separation of concerns with reusable components and services.</p>
                </article>
                <article>
                    <h3>Security First</h3>
                    <p>Built-in security headers, CSP policies, and best practices to protect user data.</p>
                </article>
                <article>
                    <h3>Accessibility</h3>
                    <p>WCAG compliant with semantic HTML, ARIA labels, and keyboard navigation support.</p>
                </article>
                <article>
                    <h3>Responsive Design</h3>
                    <p>Fully responsive layout that works seamlessly across all devices.</p>
                </article>
                <article>
                    <h3>Performance</h3>
                    <p>Optimized assets, lazy loading, and efficient resource management.</p>
                </article>
                <article>
                    <h3>Dark Mode Support</h3>
                    <p>Automatic dark mode detection and user preference respect.</p>
                </article>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="fade-in" aria-labelledby="about-title">
            <h2 id="about-title">About Nexus Apex</h2>
            <p>Nexus Apex is designed for developers who care about code quality, user experience, and security. This improved version demonstrates best practices in modern web development.</p>
            <h3>Code Structure</h3>
            <ul>
                <li>Semantic HTML5 markup</li>
                <li>Modular CSS with logical organization</li>
                <li>JavaScript using ES6+ features (when scripts are added)</li>
                <li>Clear separation of concerns</li>
                <li>DRY (Don't Repeat Yourself) principles</li>
            </ul>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="fade-in" aria-labelledby="contact-title">
            <h2 id="contact-title">Contact Us</h2>
            <form id="contact-form" method="POST" aria-labelledby="contact-title">
                <div>
                    <label for="name">Full Name <span aria-label="required">*</span></label>
                    <input 
                        type="text" 
                        id="name" 
                        name="name" 
                        required 
                        minlength="2"
                        aria-required="true"
                        placeholder="Your name"
                    >
                </div>
                <div>
                    <label for="email">Email Address <span aria-label="required">*</span></label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        required 
                        aria-required="true"
                        placeholder="your.email@example.com"
                    >
                </div>
                <div>
                    <label for="message">Message <span aria-label="required">*</span></label>
                    <textarea 
                        id="message" 
                        name="message" 
                        rows="5" 
                        required 
                        aria-required="true"
                        placeholder="Your message here..."
                    ></textarea>
                </div>
                <button type="submit" class="btn-primary">Send Message</button>
            </form>
            <p class="text-muted" style="margin-top: 1rem;">We'll respond within 24 hours.</p>
        </section>

        <!-- Status Message (for JavaScript feedback) -->
        <div id="status-message" aria-live="polite" aria-atomic="true" class="hidden"></div>
    </main>

    <!-- Footer -->
    <footer role="contentinfo">
        <p>&copy; 2025 Nexus Apex. All rights reserved.</p>
        <p>
            <a href="#privacy">Privacy Policy</a> | 
            <a href="#terms">Terms of Service</a> | 
            <a href="#accessibility">Accessibility Statement</a>
        </p>
    </footer>

    <!-- Core Application Script Module -->
    <script nonce="{NONCE}">
        'use strict';

        /**
         * Nexus Apex Application Module
         * Handles core application functionality with security and accessibility in mind
         */
        const NexusApp = (() => {
            // Private variables
            const config = {
                formId: 'contact-form',
                statusMessageId: 'status-message'
            };

            // Form validation module
            const FormValidator = {
                validate: (form) => {
                    if (!form.checkValidity()) {
                        form.reportValidity();
                        return false;
                    }
                    return true;
                },
                
                sanitize: (input) => {
                    const div = document.createElement('div');
                    div.textContent = input;
                    return div.innerHTML;
                }
            };

            // Message handler module
            const MessageHandler = {
                show: (message, type = 'info') => {
                    const messageEl = document.getElementById(config.statusMessageId);
                    if (messageEl) {
                        messageEl.className = `fade-in`;
                        messageEl.textContent = message;
                        messageEl.setAttribute('role', type === 'error' ? 'alert' : 'status');
                        messageEl.classList.remove('hidden');
                        
                        // Auto-hide after 5 seconds
                        setTimeout(() => {
                            messageEl.classList.add('hidden');
                        }, 5000);
                    }
                }
            };

            // Form handler module
            const FormHandler = {
                init: () => {
                    const form = document.getElementById(config.formId);
                    if (form) {
                        form.addEventListener('submit', FormHandler.handleSubmit);
                    }
                },

                handleSubmit: async (e) => {
                    e.preventDefault();
                    const form = e.target;

                    if (!FormValidator.validate(form)) {
                        MessageHandler.show('Please fill in all required fields correctly.', 'error');
                        return;
                    }

                    try {
                        // Simulate form submission (replace with actual API call)
                        const formData = new FormData(form);
                        const data = Object.fromEntries(formData);
                        
                        // Sanitize form data
                        Object.keys(data).forEach(key => {
                            data[key] = FormValidator.sanitize(data[key]);
                        });

                        console.log('Form submitted:', data);
                        MessageHandler.show('Thank you! Your message has been sent successfully.', 'success');
                        form.reset();
                    } catch (error) {
                        console.error('Form submission error:', error);
                        MessageHandler.show('An error occurred. Please try again later.', 'error');
                    }
                }
            };

            // Accessibility module
            const Accessibility = {
                init: () => {
                    // Skip to main content link
                    Accessibility.setupSkipLink();
                    
                    // Keyboard navigation
                    Accessibility.setupKeyboardNav();
                }
            };

            // Public API
            return {
                init: () => {
                    FormHandler.init();
                    Accessibility.init();
                    console.log('Nexus Apex initialized');
                }
            };
        })();

        // Initialize app when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', NexusApp.init);
        } else {
            NexusApp.init();
        }
    </script>
</body>
</html>
